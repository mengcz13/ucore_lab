# LAB7 实验报告

## 练习1: 理解内核级信号量的实现和基于内核级信号量的哲学家就餐问题

### 内核级信号量的设计和执行流程

内核级信号量在`kern/sync/sem.h`中的`struct semaphore_t`被定义, 包括信号量值`value`和等待队列`wait_queue`.

信号量的接口包括:

- 初始化函数`sem_init`.
- V操作函数`up`.
    执行时若当前信号量等待队列为空则增加信号量值, 否则唤醒等待队列中第一个进程.
- P操作函数`down`.
    执行时若信号量值>0则将其-1, 否则当前进程加入等待队列并放弃CPU, 执行调度.

### 用户态进程/线程信号量机制的设计方案

## 练习2: 完成内核级条件变量和基于内核级条件变量的哲学家就餐问题

### 内核级条件变量的设计描述和大致执行流流程

内核级条件变量在`kern/sync/monitor.h`中的`struct condvar`被定义, 基于信号量实现, 包括信号量sem

### 用户态进程/线程提供条件变量机制的设计方案
